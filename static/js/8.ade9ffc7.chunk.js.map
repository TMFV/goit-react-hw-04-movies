{"version":3,"sources":["styles/MoviesView.module.css","views/MoviesView.js"],"names":["module","exports","SearchResults","lazy","MoviesView","state","searchWords","searchResults","display","searchTextToState","e","preventDefault","setState","target","value","onQueryChange","search","reset","query","props","history","push","pathname","location","this","w","axios","get","then","response","data","results","catch","error","console","log","fallback","onSubmit","type","placeholder","className","style","words","Component","withRouter"],"mappings":"4HACAA,EAAOC,QAAU,CAAC,MAAQ,4B,kICKpBC,EAAgBC,gBAAK,kBACzB,iCAIIC,E,4MACJC,MAAQ,CACNC,YAAa,GACbC,cAAe,GACfC,SAAS,G,EAaXC,kBAAoB,SAACC,GACnBA,EAAEC,iBAEF,EAAKC,SAAS,CAAEN,YAAaI,EAAEG,OAAO,GAAGC,MAAON,SAAS,IACzD,EAAKO,cAAcL,EAAEG,OAAO,GAAGC,OAC/B,EAAKE,OAAON,EAAEG,OAAO,GAAGC,OAExBJ,EAAEG,OAAOI,S,EAmBXF,cAAgB,SAACG,GACf,EAAKC,MAAMC,QAAQC,KAAK,CACtBC,SAAU,EAAKH,MAAMI,SAASD,SAC9BN,OAAO,UAAD,OAAYE,M,uDAxCtB,WACoC,OAA9BM,KAAKL,MAAMI,SAASlB,QACtBmB,KAAKZ,SAAS,CACZN,YAAakB,KAAKL,MAAMI,SAASlB,MAAMa,MACvCV,SAAS,IAEXgB,KAAKT,cAAcS,KAAKL,MAAMI,SAASlB,MAAMa,OAC7CM,KAAKR,OAAOQ,KAAKL,MAAMI,SAASlB,MAAMa,U,oBAc1C,SAAOO,GAAI,IAAD,OAaR,OAVUC,IACPC,IADO,4DAFK,mCAEL,iCAE8EF,EAF9E,gCAIPG,MAAK,SAACC,GACD,EAAKxB,MAAME,gBAAkBsB,EAASC,KAAKC,SAC7C,EAAKnB,SAAS,CAAEL,cAAesB,EAASC,KAAKC,aAEhDC,OAAM,SAACC,GAAD,OAAWC,QAAQC,IAAIF,Q,oBAYlC,WAEE,OADAC,QAAQC,IAAIX,KAAKnB,MAAMC,aAErB,8BACE,eAAC,WAAD,CAAU8B,SAAU,6CAApB,UACE,uBAAMC,SAAUb,KAAKf,kBAAmB6B,KAAK,SAA7C,UACE,uBAAOA,KAAK,OAAOC,YAAY,cAC/B,wBAAQD,KAAK,SAAb,uBAEF,uBACA,gCACE,oBAAIE,UAAWC,IAAMvB,MAArB,SAA6BM,KAAKnB,MAAMC,cACxC,+BACGkB,KAAKnB,MAAMG,SACV,cAACN,EAAD,CACE6B,QAASP,KAAKnB,MAAME,cACpBmC,MAAOlB,KAAKnB,MAAMC,cAGM,KAA3BkB,KAAKnB,MAAMC,aACV,cAACJ,EAAD,CACE6B,QAASP,KAAKnB,MAAME,cACpBmC,MAAOlB,KAAKnB,MAAMC,6B,GAxEXqC,aAmFVC,sBAAWxC","file":"static/js/8.ade9ffc7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"query\":\"MoviesView_query__SZE3D\"};","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { lazy, Suspense } from \"react\";\nimport style from \"../styles/MoviesView.module.css\";\n\nconst SearchResults = lazy(() =>\n  import(\"../component/SearchResults/SearchResults\")\n);\n//import SearchResults from \"../component/SearchResults/SearchResults\";\n\nclass MoviesView extends Component {\n  state = {\n    searchWords: \"\",\n    searchResults: [],\n    display: false,\n  };\n  componentDidMount() {\n    if (this.props.location.state !== null) {\n      this.setState({\n        searchWords: this.props.location.state.query,\n        display: true,\n      });\n      this.onQueryChange(this.props.location.state.query);\n      this.search(this.props.location.state.query);\n    }\n  }\n\n  searchTextToState = (e) => {\n    e.preventDefault();\n\n    this.setState({ searchWords: e.target[0].value, display: true });\n    this.onQueryChange(e.target[0].value);\n    this.search(e.target[0].value);\n\n    e.target.reset();\n  };\n\n  search(w) {\n    const apiKey = \"140aa2a61156d040b45d8a45da490f38\";\n\n    let arr = axios\n      .get(\n        `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&language=en-US&query=${w}&page=1&include_adult=false`\n      )\n      .then((response) => {\n        if (this.state.searchResults !== response.data.results)\n          this.setState({ searchResults: response.data.results });\n      })\n      .catch((error) => console.log(error));\n\n    return arr;\n  }\n\n  onQueryChange = (query) => {\n    this.props.history.push({\n      pathname: this.props.location.pathname,\n      search: `?query=${query}`,\n    });\n  };\n\n  render() {\n    console.log(this.state.searchWords);\n    return (\n      <div>\n        <Suspense fallback={<div>Loading...</div>}>\n          <form onSubmit={this.searchTextToState} type=\"submit\">\n            <input type=\"text\" placeholder=\"Search...\"></input>\n            <button type=\"submit\">Search</button>\n          </form>\n          <hr />\n          <div>\n            <h2 className={style.query}>{this.state.searchWords}</h2>\n            <ul>\n              {this.state.display && (\n                <SearchResults\n                  results={this.state.searchResults}\n                  words={this.state.searchWords}\n                />\n              )}\n              {this.state.searchWords !== \"\" && (\n                <SearchResults\n                  results={this.state.searchResults}\n                  words={this.state.searchWords}\n                />\n              )}\n            </ul>\n          </div>\n        </Suspense>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(MoviesView);\n"],"sourceRoot":""}